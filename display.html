<!DOCTYPE html>
<html>
<head>
  <title>Traitors â€“ Display</title>
  <link rel="stylesheet" href="style.css">
  <script src="game.js"></script>
  <style>
    #container {
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
    }

    #message {
      font-size: 56px;
      text-align: center;
      margin: 30px;
    }

    #players {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 16px;
      margin-top: 40px;
    }

    .player {
      padding: 10px 18px;
      border-radius: 8px;
      background: rgba(255,255,255,0.15);
      font-size: 20px;
    }

    .dead {
      opacity: 0.35;
      text-decoration: line-through;
    }
  </style>
</head>
<body>

<div id="container">
  <img src="traitors.jpg" class="logo" id="logo">
  <div id="message"></div>
  <div id="players"></div>
</div>

<script>
function render() {
  const s = load();
  const logo = document.getElementById("logo");
  const msg = document.getElementById("message");
  const list = document.getElementById("players");

  msg.innerText = "";
  list.innerHTML = "";

  if (!s || !s.adminConfirmed || s.paused || !s.message) {
    logo.style.display = "block";
    if (s?.paused) msg.innerText = "GAME PAUSED";
  } else {
    logo.style.display = "none";
    msg.innerText = s.message;
  }

  if (s?.players) {
    s.players.forEach(p => {
      const div = document.createElement("div");
      div.className = "player" + (p.alive ? "" : " dead");
      div.innerText = p.name || `PLAYER ${p.id}`;
      list.appendChild(div);
    });
  }
}

window.addEventListener("storage", render);
render();
</script>

</body>
</html>
